{% extends 'adminsection/base.html' %}
{% load static %}
{% block content %}
<!-- //header-ends -->
<!-- main content start-->
<div id="page-wrapper">
	<div class="main-page">
		<div class="tables">
			<h3 class="title1">Assign Services</h3>
			<div class="table-responsive bs-example widget-shadow">
				<h4>Assign Services:</h4>
				<form action="" method="POST" >
					{% csrf_token %}
					<h2 id="total"></h2>
					<table class="table table-bordered">
						<thead>
							<tr>
								<th>#</th>
								<th>Service Name</th>
								<th>Ouantity</th>
								<th>Service Price</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
		
							{% for o in Services %}
							<tr>
								<th scope="row">{{ forloop.counter }}</th>
								<td><input type="hidden" name="customerid" value="{{ customer.id }}"/>{{ o.ServiceName}}</td>
								<td><input type="text" name="q_{{ o.id }}" id="q_{{ o.id }}"  value="1"  onchange="check()" disabled /></td>
								<td>
									<input type="text" name="cost" id="cost_{{ o.id }}" value="{{ o.Cost }}" disabled/>
								</td>
								<td><input type="checkbox" name="serviceid" value="{{ o.id }}" onchange="check()"  id="checkbox_{{ o.id }}"><br></td>
							</tr> 
						{% endfor %}

							<tr>
								<td colspan="4" align="center">
									<button type="submit" name="submit" class="btn btn-default">Submit</button>
								</td>

							</tr>

						</tbody>
					</table>
				</form>
			</div>
		</div>
	</div>
</div>
<!--footer-->
<!-- <?php include_once('includes/footer.php');?> -->
<!--//footer-->
</div>
<script> 
     
	{% for o in Services %}
   
			   $('#checkbox_{{ o.id }}').click(function() {
			   var cb{{ o.id }} = $('#checkbox_{{ o.id }}').is(':checked');
		   
			   $('#q_{{ o.id }}').prop('disabled', !(cb{{ o.id }}));
			   });

   {% endfor %}
   
   function check() {
   
   var add = 0;  
   {% for o in Services  %}
	   if(document.getElementById('checkbox_{{ o.id }}').checked) {
	   add += document.getElementById('cost_{{ o.id }}').value * document.getElementById('q_{{ o.id }}').value;
	   }  
   {% endfor %}

   var p = add;
   var price = p + ' USD'; 
   document.getElementById('total').innerHTML = price;  
   }
   
   check();
   
   
   
   </script>
{% endblock %}